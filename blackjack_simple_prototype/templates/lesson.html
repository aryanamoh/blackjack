<!-- TODO: update for 2 modules -->

{% extends 'layout.html' %}

{% block content %}
    <script type="text/javascript">
        let lesson = {{lesson|tojson}} 

        $(document).ready(function(){

             console.log(lesson.media_array)
             console.log(lesson.text_array)

            $("#next_button").click(function(){
                if("{{lesson.next_lesson}}" == "end"){
                    window.location.href = "/lesson_complete/{{module_id}}"
                }else{
                    window.location.href = "/lesson/{{module_id}}/{{lesson.next_lesson}}"
                }
            })
            $("#back_button").click(function(){
                if( ({{lesson.lesson_id}} - 1) < 1){
                    window.location.href = "/learn"
                } else {
                    let previous_lesson_id = {{lesson.lesson_id}}  - 1
                    window.location.href = "/lesson/{{module_id}}/"+ previous_lesson_id
                }
            })
            $("#next_lesson").click(function(){
                
                // go through each index of the lesson.media_array & lesson.text_array 
                // 

            })
        })
    </script>

    <h1>Learning Modules<h1>
    
    <h3>Lesson: {{lesson.title}}</h3>
   {{lesson.text_array[0]}}<br>
    <!-- If we want to store images locally, this syntax tends to work 
    <img src="{{ url_for('static', filename=lesson.media) }}" alt="Testing">

    ** Just make sure you have the relative path as the "media" value for the 
    specific object, ie: "media":"/assets/images/diamondjoker.png" as an example
    -->

    <br>
    <!-- <img class="lesson-img" src="{{lesson.media}}" alt="{{lesson.media_alt}}"> -->
    <div class="row">
      <!-- Allowing for the iteration of each lesson text and mapped card images -->
      
      <div class="col-2 dark-green" style="margin-left:35%;">
          <div class="row container card-container" style="flex-wrap: unset;">
              <div class="box left">
                <img class="lesson-img" src="{{lesson.media_array[0][0]}}" alt="{{lesson.media_alt}}">
              </div>
              <div class="box right">
                <img class="lesson-img" src="{{lesson.media_array[0][1]}}" alt="{{lesson.media_alt}}">
              </div>
          </div>

          <div class="row container card-container">
                              
          </div>
      </div>
      
      <div class="col-2" style="margin-left:35%;">
              <div class="row container card-container" style="flex-wrap: unset;">
                  <div class="box left">
                    <img class="lesson-img" src="{{lesson.media_array[0][2]}}" alt="{{lesson.media_alt}}">
                  </div>
                  <div class="box right">
                    <img class="lesson-img" src="{{lesson.media_array[0][3]}}" alt="{{lesson.media_alt}}">
                  </div>
              </div>

              <div class="row container card-container">
                                  
              </div>
          </div>
      </div>
  
    </div>
    <br> <br>
    <!-- Send user back to module selection if they clicked "back" at first lesson within module-->
    <button id="back_button" type="button" class="btn">Back</button>
    <button id="next_button" type="button" class="btn">Next</button>

    <br>
    <br>
    <button id="next_lesson" type="button" class="btn">Next Lesson</button>
   

    <!--
    <div class="progress" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
        <div class="progress-bar text-bg-success progress-bar-striped progress-bar-animated" style="width: 75%">75%</div>
    </div> -->

    <script type="text/javascript" src="{{ url_for('static', filename = 'js/learn.js') }}"></script>
{% endblock %}
